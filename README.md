# Laba8_Bash
Bash_scripting

### Task

Написать скрипт для крона, который раз в час присылает на заданную почту
- X IP адресов (с наибольшим кол-вом запросов) с указанием кол-ва запросов c момента последнего запуска скрипта
- Y запрашиваемых адресов (с наибольшим кол-вом запросов) с указанием кол-ва запросов c момента последнего запуска скрипта
- все ошибки c момента последнего запуска
- список всех кодов возврата с указанием их кол-ва с момента последнего запуска


Скрипт запускается раз в минуту


должна быть реализована защита от мультизапуска ??? 


#### Сделано: 

1. Скрипт крутится в кроне (раз в минуту) + надо добавить, что при исполнеии скрипта руту приходит письмо о выполнении
~~~
# ┌───────────── minute (0 - 59)
# │ ┌───────────── hour (0 - 23)
# │ │ ┌───────────── day of the month (1 - 31)
# │ │ │ ┌───────────── month (1 - 12)
# │ │ │ │ ┌───────────── day of the week (0 - 6) (Sunday to Saturday;
# │ │ │ │ │                                   7 is also Sunday on some systems)
# │ │ │ │ │
# │ │ │ │ │
# * * * * * <command to execute>

#  * * * * * /home/ubuntupc/Downloads/script >> /home/ubuntupc/Downloads/result

~~~

2. Есть основной большой лог [b]accesses.log[/b] из него построчно копируются файлы в [b]my.log[/b] (./test.sh /home/ubuntupc/Downloads/access.log 1> ~/Downloads/my.log)
~~~
#!/bin/bash

FILE=$1
while read LINE; do
     echo "Это строка: $LINE"
     sleep 2
done < $FILE
~~~

3. my.log должен читаться с момента последнего запуска скрипта (находить строку на которой остановился в последний раз и с нее продолжить чтение)
Для хранения строки на которой в последний раз остановился скрипт используется файл CountLines 
В него запись осуществляется wc + awk 
~~~
wc my.log | awk '{print $1}' >> CountLines
~~~
Из него основной скрипт будет получать номер строки на которой он остановился 
